@prefix : <http://data.europa.eu/r5r#> .
@prefix mobilitydcatap: <http://w3id.org/mobilitydcat-ap#> .
@prefix adms: <http://www.w3.org/ns/adms#> .
@prefix bibo: <http://purl.org/ontology/bibo/> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dcatap: <http://data.europa.eu/r5r/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix dqv: <http://www.w3.org/ns/dqv#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix locn: <http://www.w3.org/ns/locn#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix oa: <http://www.w3.org/ns/oa#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .


<http://data.europa.eu/930/shacl> a owl:Ontology , adms:Asset ;
  owl:imports <https://raw.githubusercontent.com/SEMICeu/DCAT-AP/master/releases/2.0.1/dcat-ap_2.0.1_shacl_shapes.ttl> ;
  owl:imports <https://raw.githubusercontent.com/SEMICeu/DCAT-AP/master/releases/2.0.1/dcat-ap_2.0.1_shacl_deprecateduris.ttl> ;
  owl:imports <https://raw.githubusercontent.com/SEMICeu/DCAT-AP/master/releases/2.0.1/dcat-ap_2.0.1_shacl_mdr-vocabularies.shape.ttl> ;
  owl:imports <https://semiceu.github.io/GeoDCAT-AP/releases/2.0.0/geodcat-ap.ttl> ;
  owl:imports <http://www.w3.org/ns/dqv.ttl> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/SpatialDataServiceCategory/SpatialDataServiceCategory.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/ConditionsApplyingToAccessAndUse/ConditionsApplyingToAccessAndUse.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/DegreeOfConformity/DegreeOfConformity.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/PriorityDataset/PriorityDataset.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/ProtocolValue/ProtocolValue.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/LimitationsOnPublicAccess/LimitationsOnPublicAccess.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/OnLineDescriptionCode/OnLineDescriptionCode.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/QualityOfServiceCriteria/QualityOfServiceCriteria.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/ResourceType/ResourceType.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/ResponsiblePartyRole/ResponsiblePartyRole.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/SpatialDataServiceType/SpatialDataServiceType.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/SpatialScope/SpatialScope.en.rdf> ;
  owl:imports <http://inspire.ec.europa.eu/metadata-codelist/TopicCategory/TopicCategory.en.rdf> ;
  owl:versionIRI <http://w3id.org/mobilityDCAT-AP/releases/1.0.0/> ;
  adms:status <http://publications.europa.eu/resource/dataset/dataset-status/DEVELOP> ;
  dcatap:availability dcatap:stable ;
  dct:conformsTo <https://www.w3.org/TR/shacl> ;
  rdfs:isDefinedBy <https://mobilitydcat-ap.github.io/mobilityDCAT-AP/drafts/latest/> ;
  dct:license <https://creativecommons.org/licenses/by/4.0> ;
  dct:created "2023-08-14"^^xsd:date ;
  dct:issued "2023-08-14"^^xsd:date ;
  dct:modified "2023-08-21"^^xsd:date ;
  dct:dateCopyrighted "2023"^^xsd:gYear ;
  dct:title "The constraints of mobilityDCAT-AP Application Profile for Data Portals in Europe"@en ;
  owl:versionInfo "1.0.0" ;
  dct:description "This document specifies the constraints on properties and classes expressed by mobilityDCAT-AP in SHACL."@en ;
  bibo:editor [
    a foaf:Person ;
    owl:sameAs <https://lina-molinas-comet.name/foaf/#me>;
    owl:sameAs <https://orcid.org/0000-0001-5446-6947> ;
    foaf:name "Lina Molinas Comet"
  ] ;
  dct:creator [ a foaf:Group ;
      foaf:name "NAPCORE SWG 4.4" ;
      foaf:page <https://github.com/mobilityDCAT-AP/mobilityDCAT-AP> ] ;
  dct:publisher <https://napcore.eu/> ;
  dct:rightsHolder <https://napcore.eu/> ;
  dcat:distribution [ a adms:AssetDistribution ;
    dct:format <http://publications.europa.eu/resource/authority/file-type/RDF_TURTLE>,
      <http://www.w3.org/ns/formats/data/Turtle> ;
    dct:title "SHACL (Turtle)"@en ;
    dcat:downloadURL <http://w3id.org/mobilitydcat-ap/releases/1.0.0/mobilitydcat-ap.shacl.ttl> ;
    dcat:mediaType "text/turtle"^^dct:IMT 
  ] ;
  .

#-------------------------------------------------------------------------
# The shapes in this file complement the DCAT-AP ones to cover all classes 
# in mobilityDCAT-AP 1.0.0.
#-------------------------------------------------------------------------

mobilitydcatap:Address_Agent_Shape
  a sh:NodeShape ;
  sh:name "Address (Agent)"@en ;
  sh:property [
    sh:maxCount 1 ;
    sh:nodeKind sh:Literal ;
    sh:path locn:adminUnitL2 ;
    sh:severity sh:Violation
  ], [
    sh:maxCount 1 ;
    sh:nodeKind sh:Literal ;
    sh:path locn:postName ;
    sh:severity sh:Violation
  ], [
    sh:maxCount 1 ;
    sh:nodeKind sh:Literal ;
    sh:path locn:adminUnitL1 ;
    sh:severity sh:Violation
  ], [
    sh:maxCount 1 ;
    sh:nodeKind sh:Literal ;
    sh:path locn:postCode ;
    sh:severity sh:Violation
  ], [
    sh:maxCount 1 ;
    sh:nodeKind sh:Literal ;
    sh:path locn:thoroughfare ;
    sh:severity sh:Violation
  ] ;
  sh:targetClass locn:Address .
  
  mobilitydcatap:Agent_Shape
  a sh:NodeShape ;
  sh:name "Agent"@en ;
  sh:property [
    sh:minCount 1 ;
    sh:nodeKind sh:Literal  ;
    sh:path foaf:mbox ;
    sh:severity sh:Violation
  ] ;
  sh:targetClass foaf:Agent .
  
  mobilitydcatap:Assessment_Shape
  a sh:NodeShape ;
  sh:name "Assessment"@en ;
  sh:property [
    sh:maxCount 1 ;
    sh:node :DateOrDateTimeDataType_Shape ;
    sh:path dct:issued ;
    sh:severity sh:Violation
  ], [
    sh:nodeKind sh:Literal  ;
    sh:maxCount 1 ;
    sh:path oa:hasBody ;
    sh:severity sh:Violation
  ], [
	sh:class rdfs:Resource ;
    sh:maxCount 1 ;
    sh:path oa:hasBody ;
    sh:severity sh:Violation
  ];
  sh:targetClass mobilitydcatap:Assessment .

:CatalogRecord_Shape
  a sh:NodeShape ;
  sh:name "Catalog"@en ;
  sh:property [
    sh:maxCount 1 ;
    sh:node :DateOrDateTimeDataType_Shape ;
    sh:path dct:created ;
    sh:severity sh:Violation
  ] ;
  sh:targetClass dcat:CatalogRecord .
  
  
 :CategoryScheme_Shape
  a sh:NodeShape ;
  sh:name "Category Scheme"@en ;
  sh:property [
    sh:minCount 1 ;
    sh:nodeKind sh:Literal	;
    sh:path dct:title;
    sh:severity sh:Violation
  ];
  sh:targetClass skos:ConceptScheme .

:Dataset_Shape
  a sh:NodeShape ;
  sh:name "Dataset"@en ;
  sh:property [
    sh:maxCount 1 ;
    sh:node :DateOrDateTimeDataType_Shape ;
    sh:path dct:created ;
    sh:severity sh:Violation
  ] ;
  sh:targetClass dcat:Dataset .
  
  :Distribution_Shape
  a sh:NodeShape ;
  sh:name "Distribution"@en ;
  sh:property [
    sh:class skos:Concept ;
	sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:path mobilitydcatap:dataModel ;
    sh:severity sh:Violation
  ];
  sh:targetClass dcat:Distribution .
  

#-------------------------------------------------------------------------
# Concepts from additional controlled vocabularies used in mobilityDCAT-AP.
#-------------------------------------------------------------------------

